<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶ñ Your Dino Personal Assistant! üåø</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Balsamiq+Sans:wght@400;700&display=swap');

        :root {
            --font-main: 'Balsamiq Sans', cursive;
            --font-secondary: 'Fredoka One', cursive;
            --bg-main: #fff0f5; /* Light lavender pink */
            --bg-section: #fffbf0; /* Soft cream */
            --text-dark: #6a1b9a; /* Rich purple */
            --text-light: #d1c4e9; /* Lavender */
            --accent-primary: #ffb6c1; /* Light pink */
            --accent-secondary: #ffe4e1; /* Misty rose */
            --accent-highlight: #f8bbd0; /* Soft pink */
            --color-success: #a5d6a7; /* Mint green */
            --color-danger: #ef9a9a; /* Soft red */
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            --border-radius: 30px;
            --transition-speed: 0.3s;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-main);
            margin: 0;
            padding: 2.5rem;
            background-color: var(--bg-main);
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow-x: hidden;
            animation: fadeIn var(--transition-speed) ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1.main-title {
            font-family: var(--font-secondary);
            font-size: 4.5rem;
            color: var(--accent-primary);
            text-shadow: 6px 6px 0px var(--text-dark),
                         8px 8px 0px var(--color-success);
            margin-bottom: 3rem;
            letter-spacing: 4px;
            line-height: 1.1;
            animation: bounce var(--transition-speed) infinite alternate;
        }

        @keyframes bounce {
            from {
                transform: translateY(0);
            }
            to {
                transform: translateY(-10px);
            }
        }

        .sections-row {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .section {
            background: var(--bg-section);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            border: 4px solid var(--accent-secondary);
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            flex: 1;
            min-width: 300px;
            max-width: 400px;
        }

        .section:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        h2 {
            font-family: var(--font-secondary);
            margin-top: 0;
            color: var(--text-dark);
            border-bottom: 5px solid var(--text-light);
            padding-bottom: 1.2rem;
            margin-bottom: 2rem;
            font-size: 2.2rem;
            text-align: center;
            letter-spacing: 1px;
        }

        button {
            background-color: var(--accent-primary);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
            padding: 1.3rem;
            border-radius: var(--border-radius);
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            background-color: var(--accent-highlight);
        }

        ul {
            list-style: none;
            padding: 0;
            margin-bottom: 0;
        }

        li {
            background: var(--accent-secondary);
            margin-bottom: 1rem;
            padding: 1.4rem;
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            word-break: break-word;
            border: 1px solid var(--accent-highlight);
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        li:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        li.completed span {
            text-decoration: line-through;
            opacity: 0.6;
            color: var(--text-light);
        }

        li.important {
            background-color: var(--accent-primary);
            border-left: 8px solid var(--color-success);
            box-shadow: 0 8px 18px rgba(255, 171, 145, 0.4);
        }

        .motivation-quote {
            width: 100%;
            max-width: 1400px;
            background-color: var(--accent-secondary);
            color: var(--text-dark);
            text-align: center;
            padding: 2.5rem 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 2.5rem;
            font-size: 1.7rem;
            font-weight: 700;
            font-style: italic;
            border: 4px solid var(--color-success);
            line-height: 1.6;
            animation: fadeIn var(--transition-speed) ease-in-out;
        }

        #motivation-author {
            display: block;
            margin-top: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .delete-btn {
            background: none;
            border: none;
            color: var(--color-danger);
            font-size: 2.2rem;
            cursor: pointer;
            padding: 10px;
            min-width: 45px;
            transition: transform var(--transition-speed);
        }

        .delete-btn:hover {
            transform: scale(1.3) rotate(15deg);
        }

        /* Budget Specifics */
        .budget-entry {
            display: grid;
            grid-template-columns: 1fr auto auto;
            align-items: center;
            gap: 20px;
            width: 100%;
        }

        .budget-desc {
            font-weight: 700;
            font-size: 1.3em;
            color: var(--text-dark);
        }

        .budget-category {
            font-size: 1em;
            background: var(--accent-highlight);
            padding: 6px 12px;
            border-radius: 12px;
            color: var(--text-dark);
            font-weight: 600;
        }

        .budget-amount.income {
            color: var(--color-success);
            font-weight: 800;
            font-size: 1.2em;
        }

        .budget-amount.expense {
            color: var(--color-danger);
            font-weight: 800;
            font-size: 1.2em;
        }

        .budget-totals {
            margin-top: 2.5rem;
            padding-top: 2.5rem;
            border-top: 4px solid var(--accent-primary);
            display: flex;
            justify-content: space-around;
            text-align: center;
            font-size: 1.3rem;
        }

        .total-value {
            font-weight: 900;
            display: block;
            font-size: 1.8em;
            margin-top: 10px;
        }

        #totalIncome {
            color: var(--color-success);
        }

        #totalExpense {
            color: var(--color-danger);
        }

        #finalBalance {
            color: var(--text-dark);
        }

        /* Task Specifics */
        .task-filters {
            display: flex;
            gap: 1.2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .task-filters button {
            width: auto;
            flex-grow: 1;
            background: #e8f5e9;
            color: var(--text-dark);
            border: 2px solid var(--text-light);
            padding: 1rem 1.4rem;
            font-size: 1.05rem;
        }

        .task-filters button.active {
            background: var(--accent-secondary);
            color: var(--text-dark);
            border-color: var(--accent-secondary);
        }

        .task-item {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-grow: 1;
        }

        .task-item input[type="checkbox"] {
            width: 28px;
            height: 28px;
            accent-color: var(--color-success);
            border-radius: 6px;
        }

        .task-details {
            font-size: 0.95em;
            color: var(--text-light);
            margin-top: 5px;
            display: block;
        }

        /* Notes Specifics */
        .note-item {
            flex-direction: column;
            align-items: flex-start;
        }

        .note-title {
            font-weight: 700;
            margin-bottom: 12px;
            font-size: 1.4rem;
            color: var(--text-dark);
        }

        .note-content {
            font-size: 1.15rem;
            line-height: 1.8;
            color: var(--text-dark);
        }

        /* Form Controls */
        .form-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .form-group.vertical {
            flex-direction: column;
            gap: 1.5rem;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 1.5rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: 28px;
            height: 28px;
            margin: 0;
            accent-color: var(--accent-primary);
            border-radius: 6px;
        }

        .checkbox-group label {
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            font-size: 1.15rem;
        }

        /* Dashboard Specifics */
        .dashboard {
            margin-top: 2rem;
            padding: 2rem;
            background: var(--bg-section);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .dashboard-item {
            background: var(--accent-secondary);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .dashboard-item h3 {
            font-family: var(--font-secondary);
            margin-bottom: 1rem;
            color: var(--text-dark);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: 1.5rem;
            }

            h1.main-title {
                font-size: 3.5rem;
            }

            h2 {
                font-size: 2rem;
            }

            .section {
                padding: 1.8rem;
            }

            .motivation-quote {
                font-size: 1.4rem;
                padding: 1.5rem;
            }

            .budget-entry {
                grid-template-columns: 1fr;
            }

            .budget-category {
                grid-column: auto;
                text-align: center;
            }

            body::before {
                display: none;
            }

            .sections-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

<h1 class="main-title">ü¶ñ Your Dino Personal Assistant! üåø</h1>

<div class="motivation-quote">
    <span id="motivation-text">"Roar with purpose! The jungle awaits your greatness!"</span><br/>
    <em id="motivation-author">The Elders of the Valley</em>
</div>

<div class="main-container">
    <div class="dashboard">
        <h2>üåü Dino Dashboard</h2>
        <div class="dashboard-grid">
            <div class="dashboard-item">
                <h3>Upcoming Tasks</h3>
                <ul id="dashboardTasks"></ul>
            </div>
            <div class="dashboard-item">
                <h3>Budget Overview</h3>
                <div id="dashboardBudget">
                    <p>Income: <span id="dashboardIncome">$0.00</span></p>
                    <p>Expense: <span id="dashboardExpense">$0.00</span></p>
                    <p>Balance: <span id="dashboardBalance">$0.00</span></p>
                </div>
            </div>
            <div class="dashboard-item">
                <h3>Recent Notes</h3>
                <ul id="dashboardNotes"></ul>
            </div>
        </div>
    </div>

    <div class="sections-row">
        <div class="section">
            <h2>üåø Task Jungle</h2>
            <div class="form-group vertical">
                <input type="text" id="taskInput" placeholder="Hunt for a new task... üçñ" />
                <input type="date" id="taskDate" />
                <input type="time" id="taskTime" />
                <div class="checkbox-group">
                    <input type="checkbox" id="taskImportant" />
                    <label for="taskImportant">Alpha Task? üëë</label>
                </div>
                <button onclick="addTask()">Stomp on it! ü¶ñ</button>
            </div>
            <div class="task-filters">
                <button id="filterAll" class="active" onclick="filterTasks('all')">All Expeditions</button>
                <button id="filterActive" onclick="filterTasks('active')">Still Roaming</button>
                <button id="filterCompleted" onclick="filterTasks('completed')">Conquered! üî•</button>
            </div>
            <ul id="taskList"></ul>
        </div>

        <div class="section">
            <h2>üíé Dino Budget</h2>
            <div class="form-group vertical">
                <input type="text" id="budgetDesc" placeholder="What shiny fossil did you find? (e.g., Rare Amber)" />
                <input type="text" id="budgetCategory" placeholder="Fortune Type (e.g., Foraging, Nest Building)" />
                <div class="form-group">
                    <input type="number" id="budgetAmount" placeholder="Amount (e.g., 5.00 glimmering geodes)" />
                    <select id="budgetType">
                        <option value="expense">Spent (Uh oh! üò©)</option>
                        <option value="income">Gained! (Cha-ching! ‚ú®)</option>
                    </select>
                </div>
                <button onclick="addBudget()">Unearth Fortune! ‚õèÔ∏è</button>
            </div>
            <ul id="budgetList"></ul>
            <div class="budget-totals">
                <div>Gained!<span id="totalIncome" class="total-value">$0.00</span></div>
                <div>Spent!<span id="totalExpense" class="total-value">$0.00</span></div>
                <div>Balance<span id="finalBalance" class="total-value">$0.00</span></div>
            </div>
        </div>

        <div class="section">
            <h2>üìú Dino Notes</h2>
            <div class="form-group vertical">
                <input type="text" id="noteTitle" placeholder="A scroll title... (e.g., Best digging spots)" />
                <textarea id="noteContent" placeholder="Scribe your ancient wisdom here... ‚úçÔ∏è" rows="6"></textarea>
                <div class="checkbox-group">
                    <input type="checkbox" id="noteImportant" />
                    <label for="noteImportant">Legendary Lore? üåü</label>
                </div>
                <button onclick="addNote()">Scribe Scroll! üìù</button>
            </div>
            <ul id="noteList"></ul>
        </div>
    </div>
</div>

<script>
    // --- UTILITIES ---
    const load = (key, fallback = []) => {
        try {
            return JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback));
        } catch (e) {
            console.error(`Error loading ${key} from localStorage:`, e);
            return fallback;
        }
    };

    const save = (key, data) => {
        try {
            localStorage.setItem(key, JSON.stringify(data));
        } catch (e) {
            console.error(`Error saving ${key} to localStorage:`, e);
        }
    };

    const createElement = (tag, attributes = {}, innerHTML = "") => {
        const element = document.createElement(tag);
        Object.entries(attributes).forEach(([key, value]) => element.setAttribute(key, value));
        element.innerHTML = innerHTML;
        return element;
    };

    const updateTotals = (income, expense) => {
        document.getElementById("totalIncome").textContent = `$${income.toFixed(2)}`;
        document.getElementById("totalExpense").textContent = `$${expense.toFixed(2)}`;
        document.getElementById("finalBalance").textContent = `$${(income - expense).toFixed(2)}`;
    };

    // --- MOTIVATION OF THE DAY ---
    const motivationQuotes = [
        { text: "Roar with purpose! The jungle awaits your greatness!", author: "The Elders of the Valley" },
        { text: "Stomp out your worries and dance with delight!", author: "Dancing Dino" },
        { text: "Be as curious as a hatchling exploring new lands!", author: "Curious Compy" },
        { text: "Grow tall and reach for the sunlight, like the mightiest ferns!", author: "Sunny Sauropod" },
        { text: "Your roar is unique and powerful! Let it be heard!", author: "Voice of the Valley" },
        { text: "Dig deep for your inner strength; it's there!", author: "Digger Dino" },
        { text: "Every footprint you leave makes a path. Keep stomping!", author: "Pathfinder Dino" },
        { text: "You're built for adventure! Go explore your potential!", author: "Adventurous Ankylosaurus" },
        { text: "Gather your strengths like a mighty Triceratops!", "author": "Resilient Tricera" },
        { text: "Let your ideas hatch and grow into something grand!", author: "Wise Pterodactyl" },
        { text: "The ancient forests hold endless possibilities for you!", author: "Forest Guardian" },
        { text: "Shine brighter than a freshly unearthed geode!", author: "Geode Glimmerer" }
    ];

    const displayMotivationQuote = () => {
        const { text, author } = motivationQuotes[Math.floor(Math.random() * motivationQuotes.length)];
        document.getElementById("motivation-text").textContent = `"${text}"`;
        document.getElementById("motivation-author").textContent = `- ${author}`;
    };

    // --- TASK MANAGEMENT MODULE ---
    let tasks = load("tasks", []);
    let currentFilter = 'all';

    const renderTasks = () => {
        const list = document.getElementById("taskList");
        list.innerHTML = tasks
            .filter(task => currentFilter === 'all' || (currentFilter === 'active' ? !task.isCompleted : task.isCompleted))
            .map(task => `
                <li class="${task.isCompleted ? 'completed' : ''} ${task.isImportant ? 'important' : ''}">
                    <div class="task-item">
                        <input type="checkbox" ${task.isCompleted ? 'checked' : ''} onchange="toggleTask(${task.id})">
                        <div>
                            <span>${task.text}</span>
                            ${task.date ? `<span class="task-details">${task.date}${task.time ? ` at ${task.time}` : ''}</span>` : ''}
                        </div>
                    </div>
                    <button class="delete-btn" onclick="removeTask(${task.id})">ü¶ï</button>
                </li>
            `).join("") || `<li style="justify-content: center; color: var(--text-light);">The jungle is quiet. No tasks to hunt right now! ü¶é</li>`;
    };

    const addTask = () => {
        const taskText = document.getElementById("taskInput").value.trim();
        if (!taskText) return alert("Rawr! Please describe your hunt!");

        tasks.push({
            id: Date.now(),
            text: taskText,
            isCompleted: false,
            isImportant: document.getElementById("taskImportant").checked,
            date: document.getElementById("taskDate").value,
            time: document.getElementById("taskTime").value
        });
        save("tasks", tasks);
        renderTasks();
        updateDashboard();
    };

    const toggleTask = id => {
        const task = tasks.find(task => task.id === id);
        if (task) {
            task.isCompleted = !task.isCompleted;
            save("tasks", tasks);
            renderTasks();
            updateDashboard();
        }
    };

    const removeTask = id => {
        tasks = tasks.filter(task => task.id !== id);
        save("tasks", tasks);
        renderTasks();
        updateDashboard();
    };

    const filterTasks = filter => {
        currentFilter = filter;
        document.querySelectorAll('.task-filters button').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`filter${filter.charAt(0).toUpperCase() + filter.slice(1)}`).classList.add('active');
        renderTasks();
    };

    const addRecurringTask = (taskText, recurrence) => {
        const task = {
            id: Date.now(),
            text: taskText,
            isCompleted: false,
            isImportant: false,
            recurrence,
            date: null,
            time: null
        };
        tasks.push(task);
        save("tasks", tasks);
        renderTasks();
        updateDashboard();
    };

    const suggestTaskPriorities = () => {
        const sortedTasks = tasks
            .filter(task => !task.isCompleted)
            .sort((a, b) => new Date(a.date) - new Date(b.date));
        console.log("Suggested Tasks:", sortedTasks);

        // Smart suggestion based on past completion patterns
        const completedTasks = tasks.filter(task => task.isCompleted);
        const prioritySuggestions = sortedTasks.map(task => {
            const completionRate = completedTasks.filter(t => t.text === task.text).length / completedTasks.length;
            return { ...task, priorityScore: completionRate };
        });
        console.log("Priority Suggestions:", prioritySuggestions);
    };

    const renderCompletionStatistics = () => {
        const completedTasks = tasks.filter(task => task.isCompleted).length;
        const totalTasks = tasks.length;
        const completionRate = totalTasks ? Math.round((completedTasks / totalTasks) * 100) : 0;
        document.getElementById("completionRate").textContent = `Completion Rate: ${completionRate}%`;

        // Additional statistics
        const importantTasksCompleted = tasks.filter(task => task.isCompleted && task.isImportant).length;
        console.log(`Important Tasks Completed: ${importantTasksCompleted}`);
    };

    // --- BUDGET TRACKER MODULE ---
    let budget = load("budget", []);

    const renderBudget = () => {
        const list = document.getElementById("budgetList");
        let totalIncome = 0, totalExpense = 0;

        list.innerHTML = budget.map((entry, i) => {
            if (entry.type === 'income') totalIncome += entry.amount;
            else totalExpense += entry.amount;

            return `
                <li>
                    <div class="budget-entry">
                        <span class="budget-desc">${entry.desc}</span>
                        <span class="budget-category">${entry.category}</span>
                        <span class="budget-amount ${entry.type}">
                            ${entry.type === 'income' ? '+' : '-'}$${entry.amount.toFixed(2)}
                        </span>
                    </div>
                    <button class="delete-btn" onclick="removeBudget(${i})">ü¶ï</button>
                </li>
            `;
        }).join("") || `<li style="justify-content: center; color: var(--text-light);">The fossil beds are empty. ü¶¥</li>`;

        updateTotals(totalIncome, totalExpense);
    };

    const addBudget = () => {
        const desc = document.getElementById("budgetDesc").value.trim();
        const category = document.getElementById("budgetCategory").value.trim();
        const amount = parseFloat(document.getElementById("budgetAmount").value);
        const type = document.getElementById("budgetType").value;

        if (!desc || !category || isNaN(amount) || amount <= 0) return alert("Grrr! Please describe your treasure!");

        budget.push({ desc, category, amount, type });
        save("budget", budget);
        renderBudget();
        updateDashboard();
    };

    const removeBudget = index => {
        budget.splice(index, 1);
        save("budget", budget);
        renderBudget();
        updateDashboard();
    };

    const setMonthlyBudgetGoal = (goal) => {
        localStorage.setItem("monthlyBudgetGoal", goal);
        document.getElementById("monthlyBudgetGoal").textContent = `$${goal.toFixed(2)}`;
    };

    const renderSpendingInsights = () => {
        const totalIncome = budget.filter(entry => entry.type === "income").reduce((sum, entry) => sum + entry.amount, 0);
        const totalExpense = budget.filter(entry => entry.type === "expense").reduce((sum, entry) => sum + entry.amount, 0);
        const insights = totalExpense > totalIncome ? "Consider reducing expenses." : "You're on track!";
        document.getElementById("spendingInsights").textContent = insights;
    };

    // --- NOTES MODULE ---
    let notes = load("notes", []);

    const renderNotes = () => {
        const list = document.getElementById("noteList");
        list.innerHTML = notes.map((note, i) => `
            <li class="note-item ${note.isImportant ? 'important' : ''}">
                <div>
                    <div class="note-title">${note.title}</div>
                    <div class="note-content">${note.content.replace(/\n/g, '<br>')}</div>
                </div>
                <button class="delete-btn" onclick="removeNote(${i})">ü¶ï</button>
            </li>
        `).join("") || `<li style="justify-content: center; color: var(--text-light);">No ancient wisdom recorded yet! üé®</li>`;
    };

    const addNote = () => {
        const title = document.getElementById("noteTitle").value.trim();
        const content = document.getElementById("noteContent").value.trim();
        if (!title || !content) return alert("Don't forget both a scroll title and wisdom!");

        notes.push({
            title,
            content,
            isImportant: document.getElementById("noteImportant").checked
        });
        save("notes", notes);
        renderNotes();
        updateDashboard();
    };

    const removeNote = index => {
        notes.splice(index, 1);
        save("notes", notes);
        renderNotes();
        updateDashboard();
    };

    const searchNotes = (query) => {
        const filteredNotes = notes.filter(note => note.title.includes(query) || note.content.includes(query));
        renderNotes(filteredNotes);
    };

    const renderRelatedNotes = (currentNote) => {
        const relatedNotes = notes.filter(note => note.tags.some(tag => currentNote.tags.includes(tag)));
        const list = document.getElementById("relatedNotes");
        list.innerHTML = relatedNotes.map(note => `<li>${note.title}</li>`).join("") || "<li>No related notes found.</li>";
    };

    const renderMarkdownNote = (noteContent) => {
        const markdownContent = marked(noteContent); // Use a markdown library like 'marked.js'
        document.getElementById("markdownPreview").innerHTML = markdownContent;
    };

    // --- DASHBOARD ---
    const updateDashboard = () => {
        // Update Task Section
        const upcomingTasks = tasks.filter(task => !task.isCompleted).slice(0, 3);
        const dashboardTasks = document.getElementById("dashboardTasks");
        dashboardTasks.innerHTML = upcomingTasks.length ? upcomingTasks.map(task => `<li>${task.text} - ${task.date} ${task.time ? `at ${task.time}` : ''}</li>`).join('') : '<li>No upcoming tasks!</li>';

        // Update Budget Section
        const totalIncome = budget.filter(entry => entry.type === 'income').reduce((sum, entry) => sum + entry.amount, 0);
        const totalExpense = budget.filter(entry => entry.type === 'expense').reduce((sum, entry) => sum + entry.amount, 0);
        document.getElementById("dashboardIncome").textContent = `$${totalIncome.toFixed(2)}`;
        document.getElementById("dashboardExpense").textContent = `$${totalExpense.toFixed(2)}`;
        document.getElementById("dashboardBalance").textContent = `$${(totalIncome - totalExpense).toFixed(2)}`;

        // Update Notes Section
        const recentNotes = notes.slice(0, 5);
        const dashboardNotes = document.getElementById("dashboardNotes");
        dashboardNotes.innerHTML = recentNotes.map(note => `<li>${note.title}</li>`).join("") || "<li>No recent notes!</li>";
    };

    const renderDashboardTasks = () => {
        const dashboardTasks = tasks.filter(task => !task.isCompleted).slice(0, 5);
        const list = document.getElementById("dashboardTasks");
        list.innerHTML = dashboardTasks.map(task => `<li>${task.text} - Due: ${task.date || "N/A"}</li>`).join("") || "<li>No upcoming tasks!</li>";
    };

    const renderCompletionStatistics = () => {
        const completedTasks = tasks.filter(task => task.isCompleted).length;
        const totalTasks = tasks.length;
        const completionRate = totalTasks ? Math.round((completedTasks / totalTasks) * 100) : 0;
        document.getElementById("completionRate").textContent = `Completion Rate: ${completionRate}%`;

        // Additional statistics
        const importantTasksCompleted = tasks.filter(task => task.isCompleted && task.isImportant).length;
        console.log(`Important Tasks Completed: ${importantTasksCompleted}`);
    };

    const suggestTaskPriorities = () => {
        const sortedTasks = tasks
            .filter(task => !task.isCompleted)
            .sort((a, b) => new Date(a.date) - new Date(b.date));
        console.log("Suggested Tasks:", sortedTasks);

        // Smart suggestion based on past completion patterns
        const completedTasks = tasks.filter(task => task.isCompleted);
        const prioritySuggestions = sortedTasks.map(task => {
            const completionRate = completedTasks.filter(t => t.text === task.text).length / completedTasks.length;
            return { ...task, priorityScore: completionRate };
        });
        console.log("Priority Suggestions:", prioritySuggestions);
    };

    // --- BUDGET DASHBOARD ---
    const renderDashboardBudget = () => {
        const totalIncome = budget.filter(entry => entry.type === "income").reduce((sum, entry) => sum + entry.amount, 0);
        const totalExpense = budget.filter(entry => entry.type === "expense").reduce((sum, entry) => sum + entry.amount, 0);
        const balance = totalIncome - totalExpense;

        document.getElementById("dashboardIncome").textContent = `$${totalIncome.toFixed(2)}`;
        document.getElementById("dashboardExpense").textContent = `$${totalExpense.toFixed(2)}`;
        document.getElementById("dashboardBalance").textContent = `$${balance.toFixed(2)}`;
    };

    const renderBudgetChart = () => {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        const income = budget.filter(entry => entry.type === "income").reduce((sum, entry) => sum + entry.amount, 0);
        const expense = budget.filter(entry => entry.type === "expense").reduce((sum, entry) => sum + entry.amount, 0);

        document.getElementById("dashboardBudget").appendChild(canvas);
        canvas.id = "budgetChart";

        new Chart(ctx, {
            type: "doughnut",
            data: {
                labels: ["Income", "Expense"],
                datasets: [{
                    backgroundColor: ["#81c784", "#e57373"],
                    data: [income, expense],
                }],
            },
        });
    };

    // Call these functions in the initialize function
    const initialize = () => {
        displayMotivationQuote();
        renderTasks();
        renderBudget();
        renderNotes();
        renderDashboardTasks();
        renderDashboardBudget();
        renderDashboardNotes();
    };

    initialize();
</script>
</body>
</html>